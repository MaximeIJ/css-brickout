var m=Object.defineProperty;var p=(a,e,s)=>e in a?m(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var n=(a,e,s)=>(p(a,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();class y{constructor(e,s,i,t,o){n(this,"radius");n(this,"speed");n(this,"x");n(this,"y");n(this,"angle");this.radius=e,this.x=s,this.y=i,this.angle=t,this.speed=o,h.style.setProperty("--diameter",this.radius*2+"vw")}updatePosition(){this.x=this.x+this.speed*Math.cos(this.angle),this.y=this.y+this.speed*Math.sin(this.angle)}handleBoundaryCollision(){(this.x-this.radius<0||this.x+this.radius>100)&&(this.angle=Math.PI-this.angle),(this.y-this.radius<0||this.y+this.radius>100)&&(this.angle=-this.angle)}handlePaddleCollision(e){const s=e.y,i=s+2.5,t=e.x,o=e.x+e.width;if(this.y+this.radius>s&&this.y-this.radius<i&&this.x+this.radius>t&&this.x-this.radius<o){const r=(this.x-(e.x+e.width/2))/(e.width/2),c=-this.angle,u=r*.2,l=c+u;console.log("Paddle collision new angle",this.angle,l),this.angle=l}}updateElementPosition(){h.style.transform=`translate(calc(${this.x}vw - 50%), calc(${this.y}vh - 50%))`}}const h=document.getElementById("ball");class f{constructor(e){n(this,"width");n(this,"x");n(this,"y");this.width=e,this.x=0,this.y=90}updatePosition(e){this.x=e}updateElementPosition(){const e=document.getElementById("paddle");e.style.transform=`translateX(${this.x}vw)`,e.style.width=`${this.width}vw`}}class g{constructor(e,s){n(this,"lastFrameTime");n(this,"lastFpsUpdate");n(this,"framesLastSecond");n(this,"ball");n(this,"paddle");n(this,"isPaused");this.lastFrameTime=Date.now(),this.lastFpsUpdate=Date.now(),this.framesLastSecond=0,this.ball=e,this.paddle=s,this.isPaused=!1,document.addEventListener("visibilitychange",()=>this.handleVisibilityChange()),document.addEventListener("keydown",i=>this.handleKeyPress(i)),document.addEventListener("mousemove",i=>this.handleMouseMove(i)),document.addEventListener("touchmove",i=>this.handleTouchMove(i))}start(){this.update()}update(){if(!this.isPaused){const e=Date.now();if(this.lastFrameTime=e,this.framesLastSecond++,e>this.lastFpsUpdate+1e3){const s=this.framesLastSecond.toFixed(0)+" FPS";document.getElementById("debug").innerHTML=s,this.framesLastSecond=0,this.lastFpsUpdate=e}this.paddle.updateElementPosition(),this.ball.updatePosition(),this.ball.handleBoundaryCollision(),this.ball.updateElementPosition(),this.ball.handlePaddleCollision(this.paddle),requestAnimationFrame(()=>this.update())}}handleVisibilityChange(){document.hidden?this.pause():this.resume()}handleKeyPress(e){(e.code==="KeyP"||e.code==="Space")&&(this.isPaused?this.resume():this.pause())}handleMouseMove(e){const i=e.clientX/window.innerWidth*100-this.paddle.width/2;this.paddle.updatePosition(i)}handleTouchMove(e){const t=e.touches[0].clientX/window.innerWidth*100-this.paddle.width/2;this.paddle.updatePosition(t)}pause(){this.isPaused=!0}resume(){this.isPaused=!1,this.update()}destroy(){document.removeEventListener("visibilitychange",()=>this.handleVisibilityChange()),document.removeEventListener("keydown",e=>this.handleKeyPress(e)),document.removeEventListener("mouseover",e=>this.handleMouseMove(e)),document.removeEventListener("touchmove",e=>this.handleTouchMove(e))}}const P=Math.PI/4,v=new y(.75,10,10,P,1),w=new f(10),L=new g(v,w);console.log("Hello World");L.start();
